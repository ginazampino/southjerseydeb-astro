---

// Component imports:
import Quote from './Quote.astro';

// Script imports:
import { fetchData } from '../../scripts/fetchData';

// API data:
const data = await fetchData('testimonials');

---

<section id="testimonials">
    <div class="container">
        <h2>Testimonials</h2>
        <div class="quote-container">
            <i class="fa-sharp fa-solid fa-quote-left"></i>
            <ul>
                {
                    data.map((testimonial) => (
                        <Quote 
                            text={testimonial.attributes.quote}
                            author={testimonial.attributes.author}
                            relationship={testimonial.attributes.relationship}
                        />
                    ))
                }
            </ul>
            <i class="fa-sharp fa-solid fa-quote-right"></i>
        </div>
    </div>
</section>

<style lang="scss">
    @import '../../styles/utility.scss';

    section#testimonials {
        position: relative;
        z-index: -1;
    }

    section#testimonials .container {
        @include flex(center, center, column);

        h2 {
            margin-bottom: rempx(30px);
        }

        .quote-container {
            max-width: 100%;
            padding: repmx(0px) rempx(20px);
            position: relative;
            width: rempx(600px);
        }

        i {
            color: rgba($color-accent, .25);
            font-size: rempx(60px);
            position: absolute;
            z-index: -1;

            @media (min-width: $screen-md) {
                color: rgba($color-accent, 1);
                z-index: -1;
            }

            &.fa-quote-left,
            &.fa-quote-right {
                display: none;
                top: rempx(-80px);

                @media (min-width: $screen-sm) {
                    display: block;
                }
            }

            &.fa-quote-left {
                left: rempx(-20px);

                @media (min-width: $screen-md) {
                    left: rempx(-80px);
                    top: rempx(-20px);
                }
            }

            &.fa-quote-right {
                right: rempx(-20px);

                @media (min-width: $screen-md) {
                    right: rempx(-80px);
                    top: rempx(-20px);
                }
            }
        }
    }
</style>